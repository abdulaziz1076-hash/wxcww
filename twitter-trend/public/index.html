<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ترندات تويتر حسب الدولة</title>
<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background-color: #f5f5f5;
    padding: 20px;
  }
  h1 {
    text-align: center;
    margin-bottom: 20px;
  }
  select, button {
    padding: 10px;
    font-size: 16px;
    margin: 5px 0;
  }
  ul {
    margin-top: 20px;
    list-style: none;
    padding: 0;
  }
  li {
    background: #fff;
    margin-bottom: 5px;
    padding: 10px;
    border-radius: 5px;
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
  }
</style>
</head>
<body>

<h1>أحدث الترندات حسب الدولة</h1>

<label for="country">اختر الدولة:</label>
<select id="country">
  <option value="">-- اختر دولة --</option>
  <option value="united-arab-emirates">الإمارات</option>
  <option value="saudi-arabia">السعودية</option>
  <option value="kuwait">الكويت</option>
  <option value="bahrain">البحرين</option>
  <option value="qatar">قطر</option>
</select>

<button id="getTrends">عرض الترندات</button>

<ul id="trendsList"></ul>

<script>
const getTrendsBtn = document.getElementById('getTrends');
const trendsList = document.getElementById('trendsList');
const countrySelect = document.getElementById('country');

getTrendsBtn.addEventListener('click', async () => {
  const country = countrySelect.value;
  trendsList.innerHTML = '<li>جاري التحميل...</li>';

  if (!country) {
    trendsList.innerHTML = '<li>يرجى اختيار الدولة أولاً</li>';
    return;
  }

  try {
    const response = await fetch(`https://wxcww.onrender.com/trends/${country}`);
    const data = await response.json();

    trendsList.innerHTML = ''; // مسح المحتوى السابق

    if (data.error) {
      trendsList.innerHTML = `<li>${data.error}</li>`;
    } else if (data.length === 0) {
      trendsList.innerHTML = '<li>لا توجد ترندات حالياً</li>';
    } else {
      data.slice(0,10).forEach(trend => {
        const li = document.createElement('li');
        li.textContent = trend;
        trendsList.appendChild(li);
      });
    }

  } catch (err) {
    trendsList.innerHTML = '<li>حدث خطأ أثناء جلب الترندات</li>';
    console.error(err);
  }
});
</script>

</body>
</html>
